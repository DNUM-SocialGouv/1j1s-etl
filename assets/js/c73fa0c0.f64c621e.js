"use strict";(self.webpackChunk_1j1s_etl_docs=self.webpackChunk_1j1s_etl_docs||[]).push([[920],{1596:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var s=t(5893),l=t(1151);const i={sidebar_label:"Comment purger les donn\xe9es ?",sidebar_position:2},r="Purge des donn\xe9es",d={id:"tuto/purge-des-donnees",title:"Purge des donn\xe9es",description:"20 Avril 2023",source:"@site/docs/tuto/purge-des-donnees.md",sourceDirName:"tuto",slug:"/tuto/purge-des-donnees",permalink:"/1j1s-etl/docs/tuto/purge-des-donnees",draft:!1,unlisted:!1,editUrl:"https://github.com/DNUM-SocialGouv/1j1s-etl/tree/main/docs/docs/docs/tuto/purge-des-donnees.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"Comment purger les donn\xe9es ?",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Comment Rollback la base de donn\xe9es ?",permalink:"/1j1s-etl/docs/tuto/rollback-database"},next:{title:"Minio, comment \xe7a marche ?",permalink:"/1j1s-etl/docs/tuto/consulter-contenu-minio"}},o={},c=[{value:"Contexte d&#39;utilisation",id:"contexte-dutilisation",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Conseils",id:"conseils",level:2},{value:"Variables d&#39;environnements",id:"variables-denvironnements",level:3},{value:"Commande \xe0 lancer",id:"commande-\xe0-lancer",level:2}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"purge-des-donn\xe9es",children:"Purge des donn\xe9es"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"20 Avril 2023"})}),"\n",(0,s.jsx)(n.h2,{id:"contexte-dutilisation",children:"Contexte d'utilisation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Lorsque des donn\xe9es sont corrompues et que l'origine est introuvable."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Avoir un token permettant l'acc\xe8es \xe0 l'application sur scalingo"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"conseils",children:"Conseils"}),"\n",(0,s.jsx)(n.h3,{id:"variables-denvironnements",children:"Variables d'environnements"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"\nSCALINGO_APP=${APP_NAME}\n\n"})}),"\n",(0,s.jsx)(n.h2,{id:"commande-\xe0-lancer",children:"Commande \xe0 lancer"}),"\n",(0,s.jsx)(n.p,{children:"Vous avez la possibilit\xe9 de supprimer l'ensemble des donn\xe9es des contextes suivants :"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Contexte"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Subcommand"}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:"Actif"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Ev\xe8nements"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"purge-events"}),(0,s.jsx)(n.td,{style:{textAlign:"center"}})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Logements"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"purge-housing-ads"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"X"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Stage"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"purge-internships"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"X"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Pour ce faire vous devez lancer la commande suivante :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'$ scalingo -a ${SCALINGO_APP} run "npm run cli -- maintain ${SUBCOMMAND}"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Apr\xe8s avoir purg\xe9 les donn\xe9es, relancer les crons du contexte en utilisant les commandes de chargement associ\xe9es \xe0 ce dernier."})]})}function u(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>d,a:()=>r});var s=t(7294);const l={},i=s.createContext(l);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);