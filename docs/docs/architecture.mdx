---
sidebar_label: ğŸ—ºï¸ Architecture
sidebar_position: 2
---

# Architecture de l'ETL

## Introduction

Ce projet a Ã©tÃ© rÃ©alisÃ© en suivant au mieux les principes du [Domain-Driven Design](https://alexsoyes.com/ddd-domain-driven-design/).
C'est pourquoi nous avons identifiÃ© des contextes mÃ©tier indÃ©pendants les uns des autres comme reprÃ©sentÃ©s ci-dessous :

**Au 10/03/2023 :**

![architecture-etl](./assets/big-picture-etl.png)

## Point d'entrÃ©e

Le point d'entrÃ©e de l'application est ici la Command Line Interface (CLI). En effet, l'ETL est aujourd'hui un produit
"serverless" ou "Function as a Service" ([FaaS](https://www.redhat.com/en/topics/cloud-native-apps/what-is-faas)). De ce
 fait, nous exÃ©cutons de simples fonctions Ã  intervalles rÃ©guliers au travers de la CLI du projet.

Lancer une opÃ©ration depuis la CLI demande quelques options nÃ©cessaires pour savoir quoi lancer :

```shell
$ npm run cli -- [extract|transform|load] [flowName]
```

Pour aller plus loin sur la commande `shell` ci-dessus :
- `npm run cli` nous donne accÃ¨s Ã  la CLI ;
- `--` nous permet d'ajouter des options supplÃ©mentaires Ã  l'action prÃ©cÃ©dente ;
- `[extract|transform|load]` nous permet de choisir quelle action est Ã  rÃ©aliser ;
- `[flowName]` nous permet de choisir sur quel flux nous souhaitons rÃ©aliser notre action.

## Modules

Comme nous le disions plus haut, nous avons dÃ©coupÃ© notre application par contexte mÃ©tier. De ce fait, nous avons
identifiÃ©s les 3 modules suivants :
- `evenements`
- `logements`
- `maintenance`
- `stages`

Cela se traduit dans le code par 3 modules distincts totalement isolÃ©s les uns des autres.

## Sous-modules

De la mÃªme faÃ§on que pour les modules, nous avons identifiÃ© des sous-modules pour chaque module :
- `chargement`
- `extraction`
- `transformation`

Chaque sous-module suit les principes de l'[Onion Architecture](https://medium.com/expedia-group-tech/onion-architecture-deed8a554423)
et ressemble Ã  l'arborescence suivante :

```markdown
sous-module
â”œâ”€â”€â”€ application-service
â”œâ”€â”€â”€ domain
â”‚    â”œâ”€â”€ model
â”‚    â””â”€â”€ service
â”œâ”€â”€â”€ infrastructure
â””â”€â”€â”€ index.ts
```

---
